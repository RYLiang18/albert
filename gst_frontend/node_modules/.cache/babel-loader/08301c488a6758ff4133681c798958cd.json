{"ast":null,"code":"import _classCallCheck from\"/home/deoxys/programming_projects/the_gst/gst_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/deoxys/programming_projects/the_gst/gst_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/deoxys/programming_projects/the_gst/gst_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/deoxys/programming_projects/the_gst/gst_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';import'../styles/gst_list.css';import{Table,Button}from'reactstrap';/* ************************* GSTListRow FC ************************* */export var GSTListRow=function GSTListRow(_ref){var counter=_ref.counter,cb_add=_ref.cb_add,cb_sub=_ref.cb_sub,cb_del=_ref.cb_del;return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,counter.username),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",null,counter.count,' ',/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:function onClick(){return cb_add(counter._id);}},\"+\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"danger\",onClick:function onClick(){return cb_sub(counter._id);}},\"-\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(Button,{color:\"link\",onClick:function onClick(){return cb_del(counter._id);}},\"delete\"),\"|\",/*#__PURE__*/React.createElement(Button,{color:\"link\"},/*#__PURE__*/React.createElement(Link,{to:\"/edit/\"+counter._id},\"edit\")))));};/* **************************** GSTList **************************** */var GSTList=/*#__PURE__*/function(_Component){_inherits(GSTList,_Component);var _super=_createSuper(GSTList);function GSTList(){var _this;_classCallCheck(this,GSTList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={counters:[]};_this.componentDidMount=function(){console.log(\"before show list\");axios.get('http://localhost:5000/counters/').then(function(response){_this.setState({counters:response.data});console.log(\"show list\");}).catch(function(err){if(err.message==='Network Error'){alert('Server probably isn\\'t on \\n'+err);}else{alert(err);}console.log(err);});};_this.deleteCounter=function(id){axios.delete('http://localhost:5000/counters/'+id).then(function(res){console.log(res.data);_this.setState({counters:_this.state.counters.filter(function(el){return el._id!==id;})});});};_this.addCount=function(id){axios.post('http://localhost:5000/counters/add/'+id).then(function(res){console.log(res.data);// update our state\n_this.componentDidMount();});};_this.subCount=function(id){axios.post('http://localhost:5000/counters/subtract/'+id).then(function(res){console.log(res.data);console.log(\"test\");// update our state\n_this.componentDidMount();});};_this.counterList=function(){return _this.state.counters.map(function(counter_){return/*#__PURE__*/React.createElement(GSTListRow,{counter:counter_,cb_add:_this.addCount,cb_sub:_this.subCount,cb_del:_this.deleteCounter});});};return _this;}_createClass(GSTList,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Current Offenders\"),/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Count\"),/*#__PURE__*/React.createElement(\"th\",null,\"Actions\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.counterList())));}}]);return GSTList;}(Component);export{GSTList as default};","map":{"version":3,"sources":["/home/deoxys/programming_projects/the_gst/gst_frontend/src/components/gst_list.tsx"],"names":["React","Component","axios","Link","Table","Button","GSTListRow","counter","cb_add","cb_sub","cb_del","username","count","_id","GSTList","state","counters","componentDidMount","console","log","get","then","response","setState","data","catch","err","message","alert","deleteCounter","id","delete","res","filter","el","addCount","post","subCount","counterList","map","counter_"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport '../styles/gst_list.css'\n\nimport {\n    Table,\n    Button\n} from 'reactstrap';\n\n/* ************************* GSTListRow FC ************************* */\ninterface GST_LR_Props {\n    counter: any,\n    cb_add: Function,\n    cb_sub: Function,\n    cb_del: Function\n}\n\nexport const GSTListRow: React.FC<GST_LR_Props> = ({\n    counter,\n    cb_add,\n    cb_sub,\n    cb_del\n}) => (\n        <tr>\n            <td>{counter.username}</td>\n            <td>\n                <span>\n                    {counter.count}\n                    {' '}\n                    <Button\n                        color=\"primary\"\n                        onClick={() => cb_add(counter._id)}\n                    >\n                        +\n                    </Button>\n                    {' '}\n                    <Button\n                        color=\"danger\"\n                        onClick={() => cb_sub(counter._id)}\n                    >\n                        -\n                </Button>\n                </span>\n            </td>\n            <td>\n                <span>\n                    <Button\n                        color=\"link\"\n                        onClick={() => cb_del(counter._id)}\n                    >\n                        delete\n                    </Button>|\n                    <Button color=\"link\">\n                        <Link to={\"/edit/\" + counter._id}>\n                            edit\n                        </Link>\n                    </Button>\n                </span>\n            </td>\n        </tr>\n    );\n\n/* **************************** GSTList **************************** */\ninterface Props { /*none*/ }\ninterface State {\n    counters: Array<any>\n}\n\nexport default class GSTList extends Component<Props, State> {\n    state = {\n        counters: []\n    }\n\n    componentDidMount = () => {\n        \n        console.log(\"before show list\")\n        axios.get('http://localhost:5000/counters/')\n            .then(response => {\n                this.setState({\n                    counters: response.data\n                });\n                console.log(\"show list\");\n            })\n            .catch(err => {\n                if (err.message === 'Network Error'){\n                    alert('Server probably isn\\'t on \\n' + err)\n                } else {\n                    alert(err);\n                }\n                console.log(err);\n            });\n    }\n\n    deleteCounter = (id: String) => {\n        axios.delete('http://localhost:5000/counters/' + id)\n            .then(res => {\n                console.log(res.data);\n                this.setState({\n                    counters: this.state.counters.filter((el: any) => el._id !== id)\n                })\n            });\n    }\n\n    addCount = (id: String) => {\n        axios.post('http://localhost:5000/counters/add/' + id)\n            .then(res => {\n                console.log(res.data);\n                // update our state\n                this.componentDidMount();\n            });\n\n    }\n\n    subCount = (id: String) => {\n        axios.post('http://localhost:5000/counters/subtract/' + id)\n            .then(res => {\n                console.log(res.data);\n\n                console.log(\"test\");\n                // update our state\n                this.componentDidMount();\n            });\n    }\n\n    // for rendering our list of counters\n    counterList = () => {\n        return this.state.counters.map(counter_ => {\n            return (\n                <GSTListRow\n                    counter={counter_}\n                    cb_add={this.addCount}\n                    cb_sub={this.subCount}\n                    cb_del={this.deleteCounter}\n                />\n            );\n        });\n    }\n\n    render() {\n\n        return (\n            <div>\n                <h3>Current Offenders</h3>\n                <Table>\n                    <thead>\n                        <tr>\n                            <th>Name</th>\n                            <th>Count</th>\n                            <th>Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {this.counterList()}\n                    </tbody>\n                </Table>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}